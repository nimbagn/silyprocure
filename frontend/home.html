<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SilyProcure - L'Avenir de l'Achat B2B en Guin√©e</title>
    <meta name="description" content="La plateforme d'achat B2B qui centralise, optimise et simplifie vos approvisionnements en Guin√©e.">

    <!-- Google Fonts: Plus Jakarta Sans pour un look Tech/SaaS moderne -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Tailwind CSS (local, optimis√© pour production) -->
    <link rel="stylesheet" href="css/tailwind.css?v=20260116-home">

    <style>
        /* Styles Custom & Utilities */
        body {
            font-family: "Plus Jakarta Sans", sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Glassmorphism avanc√© */
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .glass-dark {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Scrollbar masqu√©e pour certains √©l√©ments */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Animations d'apparition */
        .reveal-on-scroll {
            /* Progressive enhancement: visible par d√©faut (au cas o√π le JS est bloqu√© en prod) */
            opacity: 1;
            transform: none;
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Bento Grid Hover Effects */
        .bento-card { transition: all 0.4s ease; }
        .bento-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.1);
        }

        /* Utilities manquantes (non-Tailwind) */
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob { animation: blob 7s infinite; }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        .animate-scroll { animation: scroll 40s linear infinite; }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .animate-float { animation: float 6s ease-in-out infinite; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fadeInUp 350ms ease-out both; }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(148, 163, 184, 0.5); border-radius: 999px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-brand-500 selection:text-white overflow-x-hidden">

    <!-- NAVBAR FLOTTANTE -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-300 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
            <div class="glass-panel rounded-2xl shadow-lg shadow-gray-200/50 flex justify-between items-center h-16 px-6 transition-all duration-300" id="nav-container">
                
                <!-- Logo -->
                <a href="#" class="flex items-center gap-2 group">
                    <div class="relative w-8 h-8 flex items-center justify-center bg-brand-600 rounded-lg text-white overflow-hidden group-hover:rotate-12 transition-transform duration-300">
                        <i class="fas fa-cube text-sm"></i>
                        <div class="absolute inset-0 bg-white/20 blur-sm transform -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                    </div>
                    <span class="text-xl font-bold tracking-tight text-slate-900">Sily<span class="text-brand-600">Procure</span></span>
                </a>

                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#fonctionnement" class="text-sm font-semibold text-slate-600 hover:text-brand-600 transition-colors">Comment √ßa marche</a>
                    <a href="#avantages" class="text-sm font-semibold text-slate-600 hover:text-brand-600 transition-colors">Avantages</a>
                    <a href="#tracking" class="text-sm font-semibold text-slate-600 hover:text-brand-600 transition-colors">Suivi</a>
                    <a href="contact.html" class="text-sm font-semibold text-slate-600 hover:text-brand-600 transition-colors">Contact</a>
                </div>

                <!-- Auth & CTA -->
                <div class="hidden md:flex items-center gap-4" id="auth-section">
                    <!-- Contenu par d√©faut (non connect√©) -->
                    <div id="auth-not-connected">
                        <a href="index.html" class="text-sm font-bold text-slate-700 hover:text-brand-600 transition">Connexion</a>
                    </div>
                    <!-- Contenu si connect√© -->
                    <div id="auth-connected" class="hidden items-center gap-3">
                        <div class="flex items-center gap-2 px-3 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg">
                            <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                            <span class="text-xs font-semibold text-emerald-700" id="user-name-display">Connect√©</span>
                        </div>
                        <a href="dashboard.html" class="px-4 py-2 bg-brand-600 text-white rounded-xl text-sm font-bold hover:bg-brand-700 transition shadow-lg shadow-brand-600/20 flex items-center gap-2">
                            <i class="fas fa-tachometer-alt"></i> Mon Dashboard
                        </a>
                    </div>
                    <button onclick="openDevisModal()" class="group relative px-5 py-2.5 bg-brand-900 rounded-xl text-white text-sm font-bold shadow-lg shadow-brand-900/20 overflow-hidden transition-all hover:shadow-brand-600/40 hover:-translate-y-0.5">
                        <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                        <span class="relative flex items-center gap-2">
                            Devis Gratuit <i class="fas fa-arrow-right text-xs group-hover:translate-x-1 transition-transform"></i>
                        </span>
                    </button>
                </div>

                <!-- Mobile Toggle -->
                <button onclick="toggleMobileMenu()" class="md:hidden text-slate-700 p-2">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden absolute top-24 left-4 right-4 bg-white rounded-2xl shadow-2xl p-6 border border-slate-100 transform origin-top transition-all z-40">
            <div class="flex flex-col space-y-4">
                <a href="#fonctionnement" class="text-base font-semibold text-slate-700 py-2 border-b border-slate-100">Comment √ßa marche</a>
                <a href="#avantages" class="text-base font-semibold text-slate-700 py-2 border-b border-slate-100">Avantages</a>
                <a href="#tracking" class="text-base font-semibold text-slate-700 py-2 border-b border-slate-100">Suivi</a>
                <a href="contact.html" class="text-base font-semibold text-slate-700 py-2 border-b border-slate-100">Contact</a>
                <!-- Mobile Auth Section -->
                <div id="mobile-auth-not-connected">
                    <a href="index.html" class="text-base font-semibold text-brand-600 py-2">Connexion Espace Client</a>
                </div>
                <div id="mobile-auth-connected" class="hidden">
                    <div class="flex items-center gap-2 px-3 py-2 bg-emerald-50 border border-emerald-200 rounded-lg mb-2">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                        <span class="text-sm font-semibold text-emerald-700" id="mobile-user-name-display">Connect√©</span>
                    </div>
                    <a href="dashboard.html" class="text-base font-semibold text-brand-600 py-2">Mon Dashboard</a>
                </div>
                <button onclick="openDevisModal(); toggleMobileMenu()" class="w-full py-3 bg-brand-900 text-white rounded-xl font-bold mt-2">
                    Demander un devis
                </button>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION MODERNE -->
    <section class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden bg-slate-900">
        <!-- Background Elements -->
        <div class="absolute inset-0 w-full h-full">
            <div class="absolute top-0 -left-4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
            <div class="absolute top-0 -right-4 w-72 h-72 bg-brand-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
            <div class="absolute -bottom-8 left-20 w-72 h-72 bg-emerald-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
            <!-- Noise -->
            <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
            <div class="absolute inset-0" style="background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); background-size: 40px 40px;"></div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid lg:grid-cols-2 gap-12 lg:gap-8 items-center">
                
                <!-- Text Content -->
                <div class="text-center lg:text-left reveal-on-scroll">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-brand-500/10 border border-brand-500/20 text-brand-200 text-xs font-bold uppercase tracking-wider mb-6">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                        Leader B2B en Guin√©e
            </div>
            
                    <h1 class="text-5xl lg:text-7xl font-extrabold tracking-tight text-white mb-6 leading-tight">
                        L'achat intelligent <br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-400 to-emerald-300">sans fronti√®res.</span>
            </h1>
            
                    <p class="text-lg text-slate-400 mb-8 max-w-2xl mx-auto lg:mx-0 font-light leading-relaxed">
                        SilyProcure est la centrale d'achat qui connecte les entreprises guin√©ennes aux meilleurs fournisseurs mondiaux. Centralisez, commandez, recevez.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <button onclick="openDevisModal()" class="px-8 py-4 bg-white text-slate-900 rounded-xl font-bold hover:bg-slate-50 transition shadow-[0_0_20px_rgba(255,255,255,0.3)] hover:shadow-[0_0_30px_rgba(255,255,255,0.5)] flex items-center justify-center gap-2">
                            Commencer maintenant
                </button>
                        <a href="#fonctionnement" class="px-8 py-4 bg-transparent border border-white/20 text-white rounded-xl font-bold hover:bg-white/5 transition flex items-center justify-center gap-2 backdrop-blur-sm">
                            <i class="fas fa-play-circle"></i> D√©mo vid√©o
                </a>
            </div>

                    <!-- Trust Indicators -->
                    <div class="mt-12 pt-8 border-t border-white/10 flex flex-col sm:flex-row items-center gap-6 justify-center lg:justify-start text-sm text-slate-500">
                        <div class="flex -space-x-3">
                            <img class="w-10 h-10 rounded-full border-2 border-slate-900" src="https://i.pravatar.cc/100?img=1" alt="User">
                            <img class="w-10 h-10 rounded-full border-2 border-slate-900" src="https://i.pravatar.cc/100?img=2" alt="User">
                            <img class="w-10 h-10 rounded-full border-2 border-slate-900" src="https://i.pravatar.cc/100?img=3" alt="User">
                            <div class="w-10 h-10 rounded-full border-2 border-slate-900 bg-slate-800 text-white flex items-center justify-center text-xs font-bold">+500</div>
                        </div>
                        <p>Entreprises nous font confiance.</p>
                    </div>
        </div>

                <!-- Hero Graphic / Tracking Widget -->
                <div class="relative lg:h-[600px] flex items-center justify-center reveal-on-scroll" style="transition-delay: 200ms;">
                    <!-- Abstract Shape Behind -->
                    <div class="absolute inset-0 bg-gradient-to-tr from-brand-600/20 to-purple-600/20 rounded-full blur-3xl"></div>
                    
                    <!-- Tracking Widget (Floating) -->
                    <div id="tracking" class="relative w-full max-w-md animate-float z-20">
                        <div class="glass-dark rounded-3xl p-6 shadow-2xl border border-white/10">
                            <div class="flex items-center justify-between mb-6">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-brand-600 rounded-lg flex items-center justify-center text-white">
                                        <i class="fas fa-satellite-dish"></i>
                        </div>
                        <div>
                                        <h3 class="text-white font-bold">Suivi Live</h3>
                                        <p class="text-xs text-slate-400">Localisez votre commande</p>
                        </div>
                    </div>
                                <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_10px_#22c55e]"></span>
                        </div>

                            <form onsubmit="trackOrder(event)" class="space-y-4">
                                <div class="space-y-1">
                                    <label class="text-xs text-slate-400 ml-1">R√©f√©rence RFQ</label>
                                    <div class="relative">
                                        <i class="fas fa-hashtag absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
                                        <input type="text" id="track-ref" placeholder="Ex: RFQ-2026-88" class="w-full bg-slate-800/50 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-500 focus:outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 transition-all">
                        </div>
                </div>
                                <div class="space-y-1">
                                    <label class="text-xs text-slate-400 ml-1">Code Secret</label>
                                    <div class="relative">
                                        <i class="fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
                                        <input type="password" id="track-token" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off" class="w-full bg-slate-800/50 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-white placeholder-slate-500 focus:outline-none focus:border-brand-500 focus:ring-1 focus:ring-brand-500 transition-all">
            </div>
        </div>
                                <button type="submit" class="w-full py-3 bg-brand-600 hover:bg-brand-500 text-white font-bold rounded-xl transition-all shadow-lg shadow-brand-600/25 flex items-center justify-center gap-2 group">
                                    <span>Localiser</span>
                                    <i class="fas fa-search group-hover:rotate-90 transition-transform duration-300"></i>
                                </button>
                            </form>

                            <!-- Fake Status Update -->
                            <div class="mt-6 pt-4 border-t border-white/5">
                                <div class="flex items-center gap-3 opacity-60 hover:opacity-100 transition-opacity">
                                    <div class="w-8 h-8 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 text-xs">
                                        <i class="fas fa-check"></i>
                    </div>
                                    <div class="flex-1">
                                        <div class="h-1.5 w-24 bg-slate-700 rounded mb-1"></div>
                                        <div class="h-1.5 w-16 bg-slate-800 rounded"></div>
                </div>
                                    <span class="text-xs text-slate-500">2 min</span>
            </div>
        </div>
            </div>

                        <!-- Decor Cards -->
                        <div class="absolute -right-8 -bottom-8 w-48 bg-white rounded-2xl p-4 shadow-xl animate-float" style="animation-delay: 1s; animation-duration: 7s;">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center"><i class="fas fa-box"></i></div>
                                <div class="text-xs font-bold text-slate-800">Livraison</div>
                </div>
                            <div class="text-xl font-bold text-slate-900">En route</div>
                            <div class="text-[10px] text-slate-500">Arriv√©e estim√©e: 14h00</div>
                </div>
                </div>
                </div>
            </div>
        </div>
    </section>

    <!-- LOGO SCROLL -->
    <div class="bg-white border-b border-slate-100 py-8 overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 mb-4">
            <p class="text-center text-sm font-semibold text-slate-400 uppercase tracking-widest">Ils nous font confiance pour leur approvisionnement</p>
                            </div>
        <div class="relative flex overflow-x-hidden group">
            <!-- Track dynamique (charg√© via /api/public/entreprises?type=client&actif=true) -->
            <div id="client-logos-track" class="animate-scroll whitespace-nowrap flex items-center gap-10 px-8 opacity-70 hover:opacity-100 transition-all duration-500">
                <!-- fallback minimal si JS/API indisponible -->
                <div class="inline-flex items-center gap-3 px-5 py-3 rounded-2xl bg-slate-50 border border-slate-100">
                    <div class="w-9 h-9 rounded-xl bg-brand-600 text-white font-black flex items-center justify-center">SP</div>
                    <div class="text-sm font-bold text-slate-700">SilyProcure</div>
                </div>
            </div>
                        </div>
                            </div>

    <!-- AVANTAGES (BENTO GRID STYLE) -->
    <section id="avantages" class="py-24 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto mb-16 reveal-on-scroll">
                <span class="text-brand-600 font-bold tracking-wide uppercase text-sm bg-brand-50 px-3 py-1 rounded-full">Pourquoi SilyProcure ?</span>
                <h2 class="mt-4 text-3xl md:text-5xl font-extrabold text-slate-900 tracking-tight">Plus qu'une centrale d'achat. <br>Un partenaire strat√©gique.</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 auto-rows-[300px]">
                <div class="md:col-span-2 bg-white rounded-3xl p-8 shadow-sm border border-slate-100 bento-card relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-brand-50 rounded-full -mr-16 -mt-16 group-hover:scale-110 transition-transform duration-500"></div>
                    <div class="relative z-10 h-full flex flex-col justify-between">
                            <div>
                            <div class="w-12 h-12 bg-brand-100 text-brand-600 rounded-xl flex items-center justify-center text-2xl mb-6">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-slate-900 mb-2">Vitesse d'Ex√©cution</h3>
                            <p class="text-slate-500 text-lg">Ne stoppez plus vos chantiers. De la demande de devis √† la livraison, nous r√©duisons les d√©lais de 40% gr√¢ce √† notre r√©seau logistique optimis√©.</p>
                        </div>
                        <a href="#" class="text-brand-600 font-bold flex items-center gap-2 group-hover:translate-x-2 transition-transform">
                            En savoir plus <i class="fas fa-arrow-right"></i>
                        </a>
                            </div>
                            </div>

                <div class="bg-slate-900 rounded-3xl p-8 shadow-xl bento-card text-white flex flex-col justify-between relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-slate-900 to-slate-800"></div>
                    <div class="absolute bottom-0 right-0 opacity-10 text-9xl transform translate-y-4 translate-x-4">
                        <i class="fas fa-coins"></i>
                        </div>
                    <div class="relative z-10">
                        <div class="w-12 h-12 bg-white/10 text-emerald-400 rounded-xl flex items-center justify-center text-2xl mb-6 backdrop-blur-sm border border-white/10">
                            <i class="fas fa-tags"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">Prix Grossiste</h3>
                        <p class="text-slate-400">Acc√©dez √† des tarifs n√©goci√©s impossibles √† obtenir en individuel.</p>
                    </div>
                </div>

                <div class="bg-white rounded-3xl p-8 shadow-sm border border-slate-100 bento-card flex flex-col justify-center text-center items-center group">
                    <div class="w-16 h-16 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center text-3xl mb-4 group-hover:rotate-12 transition-transform">
                        <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                    <h3 class="text-xl font-bold text-slate-900 mb-2">Conformit√© Totale</h3>
                    <p class="text-slate-500 text-sm">Factures normalis√©es avec NIF. R√©cup√©rez votre TVA sans tracas administratifs.</p>
                        </div>

                <div class="md:col-span-2 bg-gradient-to-r from-brand-600 to-brand-700 rounded-3xl p-8 shadow-lg bento-card text-white relative overflow-hidden">
                    <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#fff 2px, transparent 2px); background-size: 30px 30px;"></div>
                    <div class="relative z-10 flex flex-col md:flex-row items-center gap-8 h-full">
                        <div class="flex-1 text-center md:text-left">
                            <h3 class="text-2xl font-bold mb-4">Un catalogue infini</h3>
                            <p class="text-brand-100 mb-6">Mat√©riaux de construction, √©quipements informatiques, fournitures de bureau, pi√®ces d√©tach√©es industrielles...</p>
                            <button onclick="openDevisModal()" class="px-6 py-3 bg-white text-brand-700 rounded-xl font-bold hover:bg-brand-50 transition shadow-lg">
                                Consulter le catalogue
                            </button>
                            </div>
                        <div class="flex-1 flex justify-center">
                            <div class="bg-white/10 backdrop-blur-md rounded-2xl p-4 border border-white/20 rotate-3 hover:rotate-0 transition-transform duration-500 max-w-xs w-full">
                                <div class="flex items-center gap-3 mb-3 border-b border-white/10 pb-3">
                                    <div class="w-8 h-8 rounded-full bg-slate-200"></div>
                                    <div class="h-2 w-20 bg-slate-200 rounded"></div>
                            </div>
                                <div class="space-y-2">
                                    <div class="h-2 w-full bg-slate-200/50 rounded"></div>
                                    <div class="h-2 w-3/4 bg-slate-200/50 rounded"></div>
                                    <div class="h-8 w-full bg-emerald-500/80 rounded mt-4"></div>
                        </div>
                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PROCESSUS -->
    <section id="fonctionnement" class="py-24 bg-white relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 reveal-on-scroll">
                <h2 class="text-4xl font-extrabold text-slate-900">Simple comme 1, 2, 3, 4.</h2>
            </div>

            <div class="relative">
                <div class="hidden md:block absolute top-12 left-0 w-full h-1 bg-slate-100 -z-0"></div>

                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div class="relative group reveal-on-scroll">
                        <div class="w-24 h-24 mx-auto bg-white border-4 border-slate-50 text-brand-600 rounded-full flex items-center justify-center text-3xl shadow-xl mb-6 relative z-10 group-hover:scale-110 group-hover:border-brand-100 transition-all duration-300">
                            <i class="fas fa-pencil-alt"></i>
                                </div>
                        <div class="text-center">
                            <h3 class="text-xl font-bold text-slate-900 mb-2">1. Demande</h3>
                            <p class="text-slate-500 text-sm">Remplissez le formulaire en ligne. Pas besoin de cr√©er un compte.</p>
                                </div>
                            </div>

                    <div class="relative group reveal-on-scroll" style="transition-delay: 100ms;">
                        <div class="w-24 h-24 mx-auto bg-white border-4 border-slate-50 text-brand-600 rounded-full flex items-center justify-center text-3xl shadow-xl mb-6 relative z-10 group-hover:scale-110 group-hover:border-brand-100 transition-all duration-300">
                            <i class="fas fa-search-dollar"></i>
                                </div>
                        <div class="text-center">
                            <h3 class="text-xl font-bold text-slate-900 mb-2">2. Sourcing</h3>
                            <p class="text-slate-500 text-sm">Nos algorithmes mettent en concurrence +500 fournisseurs instantan√©ment.</p>
                                </div>
                            </div>

                    <div class="relative group reveal-on-scroll" style="transition-delay: 200ms;">
                        <div class="w-24 h-24 mx-auto bg-white border-4 border-slate-50 text-brand-600 rounded-full flex items-center justify-center text-3xl shadow-xl mb-6 relative z-10 group-hover:scale-110 group-hover:border-brand-100 transition-all duration-300">
                            <i class="fas fa-file-invoice"></i>
                                </div>
                        <div class="text-center">
                            <h3 class="text-xl font-bold text-slate-900 mb-2">3. Offre</h3>
                            <p class="text-slate-500 text-sm">Recevez une proforma unique au meilleur prix sous 24h ouvr√©es.</p>
                                </div>
                            </div>

                    <div class="relative group reveal-on-scroll" style="transition-delay: 300ms;">
                        <div class="w-24 h-24 mx-auto bg-slate-900 border-4 border-slate-800 text-emerald-400 rounded-full flex items-center justify-center text-3xl shadow-xl mb-6 relative z-10 group-hover:scale-110 transition-all duration-300">
                            <i class="fas fa-truck-fast"></i>
                                </div>
                        <div class="text-center">
                            <h3 class="text-xl font-bold text-slate-900 mb-2">4. Livraison</h3>
                            <p class="text-slate-500 text-sm">Validation, paiement s√©curis√© et livraison sur votre site.</p>
                                </div>
                            </div>
                        </div>
                            </div>
                        </div>
    </section>

    <!-- CONTACT CTA -->
    <section id="contact" class="py-24 bg-slate-900 relative overflow-hidden">
        <div class="absolute inset-0 bg-brand-900/20"></div>
        <div class="max-w-4xl mx-auto px-4 relative z-10 text-center reveal-on-scroll">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">Pr√™t √† optimiser vos co√ªts ?</h2>
            <p class="text-xl text-slate-300 mb-10">Rejoignez les leaders de l'industrie en Guin√©e. Testez SilyProcure aujourd'hui sans engagement.</p>
            <div class="flex flex-col sm:flex-row gap-6 justify-center">
                <div class="bg-white/5 backdrop-blur-sm border border-white/10 p-6 rounded-2xl flex items-center gap-4 text-left hover:bg-white/10 transition cursor-pointer">
                    <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white text-xl">
                        <i class="fab fa-whatsapp"></i>
                            </div>
                            <div>
                        <div class="text-xs text-slate-400 uppercase font-bold">WhatsApp Business</div>
                        <div class="text-lg font-bold text-white">+224 622 69 24 33</div>
                            </div>
                            </div>
                <div class="bg-white/5 backdrop-blur-sm border border-white/10 p-6 rounded-2xl flex items-center gap-4 text-left hover:bg-white/10 transition cursor-pointer">
                    <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white text-xl">
                        <i class="fas fa-phone"></i>
                            </div>
                            <div>
                        <div class="text-xs text-slate-400 uppercase font-bold">Appel Direct</div>
                        <div class="text-lg font-bold text-white">+224 622 69 24 33</div>
                            </div>
                    </div>
                </div>
            
            <div class="mt-12">
                <button onclick="openDevisModal()" class="px-10 py-5 bg-white text-slate-900 text-lg font-bold rounded-2xl shadow-[0_0_30px_rgba(255,255,255,0.2)] hover:scale-105 transition-transform">
                    Faire une demande express
                </button>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-slate-950 text-slate-400 py-16 border-t border-slate-900">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
                <div class="col-span-1 md:col-span-2">
                    <span class="text-2xl font-bold text-white tracking-tight">Sily<span class="text-brand-600">Procure</span></span>
                    <p class="mt-4 text-slate-500 max-w-sm">
                        La solution digitale de r√©f√©rence pour l'approvisionnement des entreprises en Afrique de l'Ouest.
                    </p>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">Liens Rapides</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="hover:text-brand-500 transition">Accueil</a></li>
                        <li><a href="#tracking" class="hover:text-brand-500 transition">Suivi de commande</a></li>
                        <li><a href="contact.html" class="hover:text-brand-500 transition">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">L√©gal</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="hover:text-brand-500 transition">Mentions l√©gales</a></li>
                        <li><a href="#" class="hover:text-brand-500 transition">CGV</a></li>
                        <li><a href="#" class="hover:text-brand-500 transition">Confidentialit√©</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-slate-900 text-center text-sm">
                <p>&copy; 2026 SilyProcure Guin√©e. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <!-- MODAL DE DEVIS (Am√©lior√©e) -->
    <div id="devisModal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity opacity-0" id="modalBackdrop" onclick="closeDevisModal()"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-3xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-2xl opacity-0 translate-y-4 scale-95" id="modalPanel">
                    
                    <!-- Header -->
                    <div class="bg-gradient-to-r from-brand-600 to-brand-800 px-6 py-6 flex justify-between items-center text-white">
                        <div>
                            <h3 class="text-xl font-bold">Nouvelle Demande</h3>
                            <p class="text-brand-100 text-sm">Recevez votre devis sous 24h</p>
                        </div>
                        <button onclick="closeDevisModal()" class="w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Body -->
                    <form id="devis-form" onsubmit="submitDevisRequest(event)" class="px-8 py-8 space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">Nom Complet</label>
                                <input type="text" name="name" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                                </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">Entreprise</label>
                                <input type="text" name="company" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                                </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">Email Pro</label>
                                <input type="email" name="email" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                                </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">T√©l√©phone</label>
                                <input type="tel" name="phone" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <div class="flex justify-between items-center">
                                <label class="text-sm font-bold text-slate-700">Besoin (Articles)</label>
                                <button type="button" onclick="addArticleRow()" class="text-xs text-brand-600 font-bold hover:underline">+ Ajouter ligne</button>
                                </div>
                            <div id="articles-container" class="space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                                <div class="flex gap-2">
                                    <input type="text" name="articles[]" placeholder="D√©signation (ex: Ciment CPJ 42.5)" class="flex-1 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                                    <input type="number" name="quantites[]" placeholder="Qt√©" class="w-20 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                                    <select name="secteurs[]" class="w-40 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all outline-none">
                                        <option value="">Secteur...</option>
                                    </select>
                                </div>
                            </div>
                            <small class="text-xs text-slate-500">üí° Indiquez le secteur d'activit√© pour faciliter la recherche de fournisseurs</small>
                        </div>

                        <div class="space-y-2">
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-bold text-slate-700">Adresse de livraison</label>
                                <button type="button" onclick="useGeolocation()" class="flex items-center gap-2 text-xs text-brand-600 hover:text-brand-700 font-semibold transition-colors">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Me localiser</span>
                                </button>
                            </div>
                            <input type="text" id="adresse_livraison" name="adresse_livraison" placeholder="Rue, num√©ro, quartier" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                            <input type="hidden" id="latitude" name="latitude">
                            <input type="hidden" id="longitude" name="longitude">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">Ville</label>
                                <input type="text" id="ville_livraison" name="ville_livraison" placeholder="Ex: Conakry" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-bold text-slate-700">Pays</label>
                                <input type="text" id="pays_livraison" name="pays_livraison" placeholder="Ex: Guin√©e" required class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-sm font-bold text-slate-700">Message (Optionnel)</label>
                            <textarea name="message" rows="3" placeholder="D√©tails suppl√©mentaires sur votre demande..." class="w-full rounded-xl border-slate-200 bg-slate-50 focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all p-3 text-sm"></textarea>
                        </div>

                        <div class="pt-4">
                            <button type="submit" class="w-full py-4 bg-brand-600 hover:bg-brand-700 text-white font-bold rounded-xl shadow-lg shadow-brand-600/30 transition-all hover:scale-[1.02] flex items-center justify-center gap-2">
                                <span>Envoyer ma demande</span>
                                <i class="fas fa-paper-plane"></i>
                                </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- Navigation Scroll Effect ---
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('nav-container');
            if (window.scrollY > 20) {
                nav.classList.add('bg-white/90', 'backdrop-blur-xl', 'py-2');
                nav.classList.remove('bg-white/0', 'py-4');
            } else {
                nav.classList.add('bg-white/0', 'py-4');
                nav.classList.remove('bg-white/90', 'backdrop-blur-xl', 'py-2');
            }
        });

        // --- Reveal on Scroll ---
        const revealElements = document.querySelectorAll('.reveal-on-scroll');
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        revealElements.forEach(el => revealObserver.observe(el));

        // --- Mobile Menu ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- Modal Logic ---
        const modal = document.getElementById('devisModal');
        const backdrop = document.getElementById('modalBackdrop');
        const panel = document.getElementById('modalPanel');

        function openDevisModal() {
            modal.classList.remove('hidden');
            setTimeout(() => {
                backdrop.classList.remove('opacity-0');
                panel.classList.remove('opacity-0', 'translate-y-4', 'scale-95');
                panel.classList.add('opacity-100', 'translate-y-0', 'scale-100');
            }, 10);
            document.body.style.overflow = 'hidden';
            // Charger les secteurs quand le modal s'ouvre
            loadSecteurs();
        }

        function closeDevisModal() {
            backdrop.classList.add('opacity-0');
            panel.classList.add('opacity-0', 'translate-y-4', 'scale-95');
            panel.classList.remove('opacity-100', 'translate-y-0', 'scale-100');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }, 300);
        }

        // --- Form Logic ---
        function addArticleRow() {
            const container = document.getElementById('articles-container');
            const div = document.createElement('div');
            div.className = 'flex gap-2 animate-fade-in-up';
            
            // R√©cup√©rer les options de secteur depuis le premier select
            const firstSelect = container.querySelector('select[name="secteurs[]"]');
            const secteurOptions = firstSelect ? firstSelect.innerHTML : '<option value="">Secteur...</option>';
            
            div.innerHTML = `
                <input type="text" name="articles[]" placeholder="D√©signation" class="flex-1 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                <input type="number" name="quantites[]" placeholder="Qt√©" class="w-20 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                <select name="secteurs[]" class="w-40 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all outline-none">${secteurOptions}</select>
                <button type="button" onclick="this.parentElement.remove()" class="text-red-400 hover:text-red-600 px-2"><i class="fas fa-trash"></i></button>
            `;
            container.appendChild(div);
        }
        
        // Charger les secteurs depuis la base de donn√©es
        async function loadSecteurs() {
            try {
                const response = await fetch('/api/contact/secteurs');
                if (!response.ok) throw new Error('Erreur chargement secteurs');
                const data = await response.json();
                const secteurs = data.secteurs || [];
                
                // Remplir tous les selects de secteur
                const selects = document.querySelectorAll('select[name="secteurs[]"]');
                selects.forEach(select => {
                    // Garder l'option par d√©faut
                    const defaultOption = select.querySelector('option[value=""]') || document.createElement('option');
                    if (!defaultOption.value) {
                        defaultOption.value = '';
                        defaultOption.textContent = 'Secteur...';
                        select.innerHTML = '';
                        select.appendChild(defaultOption);
                    } else {
                        select.innerHTML = defaultOption.outerHTML;
                    }
                    
                    // Ajouter les secteurs
                    secteurs.forEach(secteur => {
                        const option = document.createElement('option');
                        option.value = secteur;
                        option.textContent = secteur;
                        select.appendChild(option);
                    });
                });
            } catch (error) {
                console.error('Erreur chargement secteurs:', error);
                // En cas d'erreur, utiliser des secteurs par d√©faut
                const secteursParDefaut = [
                    'BTP - Construction',
                    'Commerce - Distribution',
                    'Industrie - Manufacture',
                    'Services - Conseil',
                    'Transport - Logistique',
                    'Informatique - TIC',
                    'Agroalimentaire',
                    'Autre'
                ];
                const selects = document.querySelectorAll('select[name="secteurs[]"]');
                selects.forEach(select => {
                    secteursParDefaut.forEach(secteur => {
                        const option = document.createElement('option');
                        option.value = secteur;
                        option.textContent = secteur;
                        select.appendChild(option);
                    });
                });
            }
        }

        // Fonction de g√©olocalisation
        async function useGeolocation() {
            if (!navigator.geolocation) {
                alert('La g√©olocalisation n\'est pas support√©e par votre navigateur.');
                return;
            }

            const btn = event.target.closest('button');
            const originalContent = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Localisation...';

            try {
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const { latitude, longitude } = position.coords;
                        
                        // Enregistrer les coordonn√©es
                        document.getElementById('latitude').value = latitude.toFixed(8);
                        document.getElementById('longitude').value = longitude.toFixed(8);
                        
                        // Essayer de r√©cup√©rer l'adresse via reverse geocoding
                        try {
                            const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`, {
                                headers: {
                                    'User-Agent': 'SilyProcure/1.0'
                                }
                            });
                            
                            if (response.ok) {
                                const data = await response.json();
                                const address = data.address || {};
                                
                                // Remplir les champs avec les donn√©es de l'adresse
                                const adresseParts = [];
                                if (address.road) adresseParts.push(address.road);
                                if (address.house_number) adresseParts.push(address.house_number);
                                
                                document.getElementById('adresse_livraison').value = adresseParts.join(' ') || address.display_name?.split(',')[0] || '';
                                document.getElementById('ville_livraison').value = address.city || address.town || address.village || address.municipality || '';
                                document.getElementById('pays_livraison').value = address.country || 'Guin√©e';
                            }
                        } catch (geocodeError) {
                            console.log('Reverse geocoding non disponible, coordonn√©es enregistr√©es');
                        }
                        
                        btn.disabled = false;
                        btn.innerHTML = originalContent;
                        
                        // Afficher un message de succ√®s
                        if (typeof Toast !== 'undefined') {
                            Toast.success('Position r√©cup√©r√©e avec succ√®s !');
                        } else {
                            alert('‚úÖ Position r√©cup√©r√©e avec succ√®s !');
                        }
                    },
                    (error) => {
                        btn.disabled = false;
                        btn.innerHTML = originalContent;
                        
                        let errorMsg = 'Impossible de r√©cup√©rer votre position.';
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMsg = 'Permission de g√©olocalisation refus√©e. Veuillez autoriser l\'acc√®s √† votre position.';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMsg = 'Position indisponible.';
                                break;
                            case error.TIMEOUT:
                                errorMsg = 'D√©lai d\'attente d√©pass√©.';
                                break;
                        }
                        
                        if (typeof Toast !== 'undefined') {
                            Toast.error(errorMsg);
                        } else {
                            alert('‚ùå ' + errorMsg);
                        }
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 0
                    }
                );
            } catch (error) {
                btn.disabled = false;
                btn.innerHTML = originalContent;
                console.error('Erreur g√©olocalisation:', error);
                if (typeof Toast !== 'undefined') {
                    Toast.error('Erreur lors de la g√©olocalisation');
                } else {
                    alert('‚ùå Erreur lors de la g√©olocalisation');
                }
            }
        }

        window.useGeolocation = useGeolocation;

        async function submitDevisRequest(e) {
            e.preventDefault();
            const form = e.target;
            const btn = form.querySelector('button[type="submit"]');
            const originalContent = btn.innerHTML;
            
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Envoi...';

            try {
                // Collecter les donn√©es du formulaire
                const formData = new FormData(form);
                const nom = formData.get('name');
                const email = formData.get('email');
                const telephone = formData.get('phone');
                const entreprise = formData.get('company');
                const adresse_livraison = formData.get('adresse_livraison');
                const ville_livraison = formData.get('ville_livraison');
                const pays_livraison = formData.get('pays_livraison');
                const message = formData.get('message') || '';
                const latitude = formData.get('latitude') || null;
                const longitude = formData.get('longitude') || null;

                // Collecter les articles
                const articlesInputs = form.querySelectorAll('input[name="articles[]"]');
                const quantitesInputs = form.querySelectorAll('input[name="quantites[]"]');
                const secteursSelects = form.querySelectorAll('select[name="secteurs[]"]');
                const articles = [];
                
                articlesInputs.forEach((articleInput, index) => {
                    const quantiteInput = quantitesInputs[index];
                    const secteurSelect = secteursSelects[index];
                    if (articleInput.value.trim() && quantiteInput.value) {
                        articles.push({
                            description: articleInput.value.trim(),
                            quantite: parseInt(quantiteInput.value) || 1,
                            unite: 'unit√©',
                            secteur: secteurSelect?.value?.trim() || null,
                            ordre: index
                        });
                    }
                });

                if (articles.length === 0) {
                    throw new Error('Veuillez ajouter au moins un article');
                }

                // Pr√©parer les donn√©es pour l'API
                const data = {
                    nom,
                    email,
                    telephone,
                    entreprise: entreprise || null,
                    articles,
                    adresse_livraison,
                    ville_livraison,
                    pays_livraison,
                    message: message || null,
                    mode_notification: 'email',
                    latitude: latitude ? parseFloat(latitude) : null,
                    longitude: longitude ? parseFloat(longitude) : null
                };

                // #region agent log - Envoi demande devis
                console.log('üì§ Envoi demande devis:', { nom, email, articlesCount: articles.length });
                // #endregion

                // Envoyer la requ√™te au backend
                const response = await fetch('/api/contact/devis-request', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || 'Erreur lors de l\'envoi de la demande');
                }

                // Succ√®s
                    btn.classList.remove('bg-brand-600', 'hover:bg-brand-700');
                    btn.classList.add('bg-green-500', 'hover:bg-green-600');
                btn.innerHTML = '<i class="fas fa-check"></i> Envoy√© !';

                // Afficher un message de succ√®s avec la r√©f√©rence
                if (result.reference) {
                    alert(`‚úÖ Votre demande a √©t√© envoy√©e avec succ√®s !\n\nR√©f√©rence: ${result.reference}\n\nVous recevrez un email avec le lien de suivi.`);
                } else {
                    alert('‚úÖ Votre demande a √©t√© envoy√©e avec succ√®s !');
                }

                    setTimeout(() => {
                        closeDevisModal();
                    form.reset();
                    // R√©initialiser le conteneur d'articles √† un seul champ
                    const articlesContainer = document.getElementById('articles-container');
                    articlesContainer.innerHTML = `
                        <div class="flex gap-2">
                            <input type="text" name="articles[]" placeholder="D√©signation (ex: Ciment CPJ 42.5)" class="flex-1 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                            <input type="number" name="quantites[]" placeholder="Qt√©" class="w-20 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm" required>
                            <select name="secteurs[]" class="w-40 rounded-xl border-slate-200 bg-slate-50 p-3 text-sm focus:bg-white focus:border-brand-500 focus:ring-brand-500 transition-all outline-none">
                                <option value="">Secteur...</option>
                            </select>
                        </div>
                    `;
                    // Recharger les secteurs apr√®s r√©initialisation
                    loadSecteurs();
                    // Reset Button
                        btn.disabled = false;
                        btn.classList.add('bg-brand-600', 'hover:bg-brand-700');
                        btn.classList.remove('bg-green-500', 'hover:bg-green-600');
                    btn.innerHTML = originalContent;
                }, 2000);

            } catch (error) {
                console.error('‚ùå Erreur envoi demande devis:', error);
                btn.disabled = false;
                btn.innerHTML = originalContent;
                alert(`‚ùå Erreur: ${error.message || 'Une erreur est survenue lors de l\'envoi de votre demande. Veuillez r√©essayer.'}`);
            }
        }

        function trackOrder(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const icon = btn.querySelector('i');
            
            icon.classList.add('fa-spin');
                    setTimeout(() => {
                icon.classList.remove('fa-spin');
                alert("Syst√®me de d√©mo : Commande localis√©e au Port Autonome de Conakry.");
            }, 1500);
        }

        // --- Clients Logos (public) ---
        function escapeHtml(str) {
            return String(str || '')
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }

        function initialsFromName(name) {
            const parts = String(name || '').trim().split(/\s+/).filter(Boolean);
            const a = (parts[0] || '').slice(0, 1);
            const b = (parts[1] || parts[0] || '').slice(0, 1);
            return (a + b).toUpperCase() || 'CL';
        }

        function renderClientLogoItem(ent) {
            const nom = ent?.nom || ent?.raison_sociale || 'Client';
            const initials = initialsFromName(nom);
            // Support futur si vous ajoutez logo_url/logo_path dans la table
            const logoUrl = ent?.logo_url || ent?.logo || ent?.logo_path || '';
            const website = ent?.site_web || '';

            const label = escapeHtml(nom);
            const href = website && /^https?:\/\//i.test(website) ? website : (website ? `https://${website}` : '');

            const content = logoUrl
                ? `<img src="${escapeHtml(logoUrl)}" alt="${label}" class="h-10 max-w-[160px] object-contain" loading="lazy" onerror="this.remove(); this.parentElement.querySelector('[data-fallback]').classList.remove('hidden');">`
                : '';

            const fallback = `
                <div data-fallback class="${logoUrl ? 'hidden' : ''} inline-flex items-center gap-3 px-5 py-3 rounded-2xl bg-slate-50 border border-slate-100">
                    <div class="w-10 h-10 rounded-xl bg-white border border-slate-200 text-slate-800 font-black flex items-center justify-center">${escapeHtml(initials)}</div>
                    <div class="text-sm font-bold text-slate-700">${label}</div>
                </div>
            `;

            const inner = `
                <div class="inline-flex items-center justify-center px-2 py-2">
                    <div class="inline-flex items-center justify-center rounded-2xl bg-white border border-slate-100 shadow-sm px-6 py-4 hover:border-brand-100 hover:shadow-md transition-all">
                        ${content}
                        ${fallback}
                    </div>
                </div>
            `;

            return href ? `<a class="inline-block align-middle" href="${escapeHtml(href)}" target="_blank" rel="noopener noreferrer" title="${label}">${inner}</a>` : inner;
        }

        function typeBadge(type) {
            const t = String(type || '').toLowerCase();
            if (t === 'fournisseur') return { label: 'Fournisseur', cls: 'bg-amber-50 text-amber-700 border-amber-200' };
            if (t === 'client') return { label: 'Client', cls: 'bg-emerald-50 text-emerald-700 border-emerald-200' };
            return { label: type || 'Entreprise', cls: 'bg-slate-50 text-slate-700 border-slate-200' };
        }

        async function loadActiveClientLogos() {
            const track = document.getElementById('client-logos-track');
            if (!track) return;

            try {
                const res = await fetch('/api/public/entreprises?types=client,fournisseur&limit=30', { credentials: 'omit' });
                if (!res.ok) {
                    // Ne pas afficher d'erreur si l'API n'est pas disponible (page publique)
                    console.debug('API entreprises non disponible (normal pour page publique)');
                    return;
                }
                const entreprises = await res.json();
                if (!Array.isArray(entreprises) || entreprises.length === 0) return;

                // Build one sequence and duplicate it for a seamless marquee
                const items = entreprises.map((ent) => {
                    const badge = typeBadge(ent?.type_entreprise);
                    const base = renderClientLogoItem(ent);
                    // inject a small badge (wrap)
                    return `
                        <div class="inline-block align-middle">
                            <div class="relative">
                                <div class="absolute -top-2 left-4 px-2 py-0.5 text-[10px] font-black uppercase tracking-wider rounded-full border ${badge.cls}">
                                    ${escapeHtml(badge.label)}
                                </div>
                                ${base}
                            </div>
                        </div>
                    `;
                }).join('');
                track.innerHTML = items + items;
            } catch (e) {
                // Silent fallback (keep default) - erreur r√©seau ou autre
                console.debug('Erreur chargement logos clients:', e.message);
            }
        }

        // Charger d√®s que possible (sans d√©pendre des animations)
        loadActiveClientLogos();

        // V√©rifier si l'utilisateur est connect√© et adapter l'interface
        function checkUserConnection() {
            const token = localStorage.getItem('token');
            const userStr = localStorage.getItem('user');
            
            if (token && userStr) {
                try {
                    const user = JSON.parse(userStr);
                    const userName = user.nom || user.email || 'Utilisateur';
                    
                    // Afficher la section connect√©e
                    const authConnected = document.getElementById('auth-connected');
                    const authNotConnected = document.getElementById('auth-not-connected');
                    const mobileAuthConnected = document.getElementById('mobile-auth-connected');
                    const mobileAuthNotConnected = document.getElementById('mobile-auth-not-connected');
                    const userNameDisplay = document.getElementById('user-name-display');
                    const mobileUserNameDisplay = document.getElementById('mobile-user-name-display');
                    
                    if (authConnected && authNotConnected) {
                        authNotConnected.classList.add('hidden');
                        authConnected.classList.remove('hidden');
                        authConnected.classList.add('flex');
                    }
                    
                    if (mobileAuthConnected && mobileAuthNotConnected) {
                        mobileAuthNotConnected.classList.add('hidden');
                        mobileAuthConnected.classList.remove('hidden');
                    }
                    
                    if (userNameDisplay) {
                        userNameDisplay.textContent = userName;
                    }
                    
                    if (mobileUserNameDisplay) {
                        mobileUserNameDisplay.textContent = userName;
                    }
                    
                    // Ajouter un message de bienvenue subtil dans le hero
                    const heroContent = document.querySelector('.text-center.lg\\:text-left.reveal-on-scroll');
                    if (heroContent && !document.getElementById('welcome-badge')) {
                        const existingBadge = heroContent.querySelector('.inline-flex.items-center.gap-2');
                        if (existingBadge) {
                            const welcomeBadge = document.createElement('div');
                            welcomeBadge.id = 'welcome-badge';
                            welcomeBadge.className = 'inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-200 text-xs font-bold uppercase tracking-wider mb-4 animate-fade-in-up';
                            welcomeBadge.innerHTML = `
                                <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                                Bienvenue, ${userName} !
                            `;
                            heroContent.insertBefore(welcomeBadge, existingBadge);
                        }
                    }
                } catch (e) {
                    console.error('Erreur parsing user:', e);
                }
            }
        }

        // V√©rifier la connexion au chargement de la page
        document.addEventListener('DOMContentLoaded', () => {
            checkUserConnection();
        });
    </script>
</body>
</html>
